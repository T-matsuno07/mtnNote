# Git 戻す系操作一覧

# commit を取り消す git reset
gitは分散型システムなので，commitした後であってもpushするまでは他のメンバーに影響を与えることがなく，commit情報を削除したりまとめたりすることが出来る。  
使い方によっては，
- 最初に全機能の実装を行い，後から複数のcommitに分割する  
- 最初は細かくcommitしておき，後から一つのcommitに纏める

などが出来る。

原則として，pushした後は実施すべきではない。
他の人にも影響が出てしまうため。

# commit情報削除
`` git reset <mode> <commit> ``  
commitした情報を削除するコマンド。  
pull した際にマージが発生してしまったときに使うと良い。  
用途に応じて３つのどれかで歴史を巻き戻す。


### HEADだけを元に戻す (soft)
``git reset --soft HEAD~``  
最も影響の少ないオプションで，指定したコミットにHEADを変更(戻す)だけ。  
上記のコマンドだと，HEADを一つ前のコミットに戻す。
直近のcommit操作のみ取り消す効果であり，
addコマンドを実行した後の状態に戻る。  
無論，ファイルの変更状態は保持される。  
reset --soft HEAD~ → commit  
でコミットのログを書き直すことが出来る。

### HEADとインデックスを元に戻す (mixed or 未指定)
`` git reset --mixed HEAD~ ``
HEADを指定したコミットに変更し，インデックスも指定したコミットの状態に戻す。HEADとインデックスを一つ目の状態に戻す効果がある。
直近のcommitとaddコマンドを取り消す効果があるため，commitした後に，ファイルの編集を追加してコミットしなおしたい時に使える。

インデックスの状態を元に戻す特徴を利用し，addコマンドを全取り消しするのに使える。    
`` git reset HEAD``  
このコマンドにより「add -u」などにより纏めてステージングしたファイルをインデックスから外すことが出来る。


### １つまえのコミットまでインデックス、ワーキングツリーも含めて元に戻す
`` git reset --hard HEAD~ ``
「コミット(commit)・ステージング(add)・ファイルの編集」を全て取り消す。一つ前のコミットの状態まで完全に戻すことが出来るコマンド。

ファイルの編集(ワーキングツリー)の内容まで削除するため，使用する際には最新の注意を払うこと。
